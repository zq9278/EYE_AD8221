#
# Copyright (c) 2018 Nordic Semiconductor
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DEVICE_NAME="EYE_AD8221"
CONFIG_BT_SMP=n
CONFIG_BT_SETTINGS=n
CONFIG_BT_LBS_SECURITY_ENABLED=n

# Keep the connection interval from being auto-changed to slow defaults.
CONFIG_BT_GAP_AUTO_UPDATE_CONN_PARAMS=n
CONFIG_BT_GAP_PERIPHERAL_PREF_PARAMS=y
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12
CONFIG_BT_PERIPHERAL_PREF_LATENCY=0
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# ADC (SAADC)
CONFIG_ADC=y

# BLE peripheral helpers
CONFIG_DK_LIBRARY=y

CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# UART (P0.06 TX / P0.12 RX via overlay) used for VOFA+ binary stream
CONFIG_SERIAL=y

# Streaming + filtering (defaults)
CONFIG_EYE_BLE_STREAM_HZ=200
CONFIG_EYE_BLE_PACKET_HZ=50
CONFIG_EYE_ADC_SAMPLE_RATE_HZ=2000
CONFIG_EYE_NOTCH_FREQ_HZ=50
CONFIG_EYE_NOTCH_ENABLED=y
CONFIG_EYE_NOTCH_Q=25
CONFIG_EYE_NOTCH_DOUBLE=n
CONFIG_EYE_ENVELOPE_ENABLED=y
CONFIG_EYE_ENVELOPE_TAU_SHIFT=5
CONFIG_EYE_BLE_CONN_INTERVAL_MIN=6
CONFIG_EYE_BLE_CONN_INTERVAL_MAX=12

# VOFA+ UART stream (raw ADC + filtered sample)
CONFIG_EYE_UART_STREAM=y
CONFIG_EYE_UART_STREAM_CENTERED=n
CONFIG_EYE_UART_STREAM_HZ=2000
CONFIG_EYE_UART_STREAM_CHANNELS=3

# Keep UART clean for VOFA+ binary stream: route text output to RTT instead.
CONFIG_USE_SEGGER_RTT=y
CONFIG_RTT_CONSOLE=y
CONFIG_CONSOLE=y
CONFIG_PRINTK=y
CONFIG_UART_CONSOLE=n
CONFIG_BOOT_BANNER=n

# Increase TX capacity to sustain high notification rates even if the central
# selects a longer connection interval.
CONFIG_BT_CONN_TX_MAX=6
CONFIG_BT_L2CAP_TX_BUF_COUNT=6
CONFIG_BT_ATT_TX_COUNT=6
CONFIG_BT_BUF_ACL_TX_COUNT=6
CONFIG_BT_BUF_EVT_RX_COUNT=8
